<!DOCTYPE html>
<html>

<head>
    <title>Lamar's Chat</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous" />
    <link rel="stylesheet" href="css/main.css" />
</head>

<body ng-app="myApp" ng-controller="mainController">
    <div class="wrapper">
        <div class="chat-container">
            <ul class="list-group">
                <li class="list-group-item" ng-repeat="message in main.handle.messages track by $index">
                    <div ng-cloak>
                        <strong ng-style="{color:main.handle.colors[message.userName]}">{{message.userName}}</strong> <small class="text-muted">{{ message.timeStamp | date : 'EEE h:mma' }}</small>
                        <br />{{message.content}}
                    </div>
                </li>
            </ul>
        </div>
        <div class="input-container">
            <div class="flex-row-nowrap">
                <div class="input-box" ng-cloak>
                    <input class="form-control no-radius" ng-change="main.imTyping()" ng-keypress="main.sendMessage($event, main.message)" type="text" id="chatBox" placeholder="Send a message {{main.userName}}!" ng-model="main.message" />

                </div>
                <div class="input-send-button" ng-cloak>
                    <button class="btn btn-primary no-radius" ng-click="main.sendMessage('clicked',main.message)" type="submit">Send</button>
                </div>
            </div>

            <div class="notifications" ng-cloak>
                <div class="people-typing">
                    <div ng-cloak ng-show="main.handle.peopleTyping.length > 0">
                        <span class="tag no-radius tag-custom tag-default" ng-if="main.handle.peopleTyping.length >= 1 && main.handle.peopleTyping.length < 5">
                    <span ng-repeat="person in main.handle.peopleTyping track by $index"  ng-style="{color:main.handle.colors[person]}">
                      <span ng-if="$index != 0">
                        ,
                      </span> {{person}}
                        </span>
                        is typing &#8230;
                        </span>

                        <span class="tag no-radius tag-custom tag-default" ng-if="main.handle.peopleTyping.length >= 5">
                        {{main.handle.peopleTyping.length}} people are typing &#8230;
                    </span>
                    </div>
                </div>
                <div ng-cloak ng-if="main.message.length > main.maxCharacters" class="alert alert-danger">
                    <strong>Error!</strong> Your message is too long (max characters: {{main.maxCharacters}}) it will not be sent!
                </div>

            </div>

        </div>
        <script src="/socket.io/socket.io.js"></script>
        <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
        <script src="javascript/main.js"></script>
</body>

</html>
